"use strict";function jsonFlickrApi(a){return Slickr.utils.log("jsonFlickrApi",["res",a]),Slickr.onResponseFromFlickrApi(a),a}Slickr.createElements=function(){Slickr.utils.log("createElements",[]);var a=$("<div></div>").addClass("image"),b=$("<div></div>"),c=$("<img/>"),d=$("<a></a>"),e=$("<div></div>"),f=$('<div class="tags"></div>');return{imageContainer:a,imageTitle:b,imageElement:c,anchorElement:d,ownerName:e,tags:f}},Slickr.createImage=function(a,b){return Slickr.utils.log("createImage",["photo",a]),b.attr("src",Slickr.makePhotoUrl(a)).attr("title",a.title).attr("alt",a.title).attr("height",Slickr.env.imageProperties.height),b},Slickr.createImageTitle=function(a,b){Slickr.utils.log("createImageTitle",["title",a]);var c=b;return c.addClass("image-title"),c.text(a),c},Slickr.getContainer=function(){return Slickr.utils.log("getContainer",[]),$("#"+Slickr.env.imageProperties.containerId)},Slickr.createOwnerName=function(a,b){return Slickr.utils.log("createOwnerName",["photo",a,"element",b]),b.text(a.ownername),b.addClass("owner-name"),b},Slickr.appendImageToContainer=function(a){Slickr.utils.log("appendImageToContainer",["photo",a]);var b=Slickr.createElements(),c=Slickr.createOwnerName(a,b.ownerName),d=Slickr.createImage(a,b.imageElement),e=Slickr.createAnchor(a,b.anchorElement),f=b.imageContainer,g=a.title,h=Slickr.appendImageToAnchor(d,e),i=Slickr.createImageTitle(g,b.imageTitle),j=b.tags;return j.text(a.tags),f.append(h),f.append(c),f.append(i),f.append(j),Slickr.getContainer().append(f),f},Slickr.createAnchor=function(a,b){return Slickr.utils.log("createAnchor",["photo",a]),b.attr("href",Slickr.makeLinkUrl(a)),b},Slickr.makePhotoUrl=function(a){return Slickr.utils.log("makePhotoUrl",["photo",a]),"http://farm"+a.farm+".static.flickr.com/"+a.server+"/"+a.id+"_"+a.secret+"_t.jpg"},Slickr.appendImageToAnchor=function(a,b){return Slickr.utils.log("appendImageToAnchor",["image",a,"anchor",b]),b.append(a),b},Slickr.makeLinkUrl=function(a){return Slickr.utils.log("makeLinkUrl",["photo",a]),"http://www.flickr.com/photos/"+a.owner+"/"+a.id},Slickr.appendImages=function(a){Slickr.utils.log("appendImages",["photos",a]);for(var b=0,c=a.length;c>b;b++)Slickr.appendImageToContainer(a[b])},Slickr.titles={splittedTitles:function(a){Slickr.utils.log("splittedTitles",["titles",a]);for(var b={},c=0,d=a.length;d>c;c++)for(var e=Slickr.utils.split(a[c]),f=0;e[f];f++)b[e[f]]?b[e[f]]+=1:b[e[f]]=1;return b},appendTitles:function(a){Slickr.utils.log("appendTitles",["titles",a]);var b=$("section.titles.tag-cloud"),c=Slickr.titles.splittedTitles(a);for(var d in c)if(c.hasOwnProperty(d)){var e=$('<span class="title"></span>');e.text(d).attr("data-count",c[d]),b.append(e)}}},Slickr.tags={splittedTags:function(a){Slickr.utils.log("splittedTags",["tags",a]);for(var b={},c=0,d=a.length;d>c;c++)for(var e=Slickr.utils.split(a[c]),f=0;e[f];f++)b[e[f]]?b[e[f]]+=1:b[e[f]]=1;return b},appendTags:function(a){Slickr.utils.log("appendTags",["tags",a]);var b=$("section.tags.tag-cloud"),c=Slickr.tags.splittedTags(a);for(var d in c)if(c.hasOwnProperty(d)){var e=$('<span class="tag"></span>');e.text(d).attr("data-count",c[d]),b.append(e)}}},Slickr.onResponseFromFlickrApi=function(a){Slickr.utils.log("onResponseFromFlickrApi",["res",a]);for(var b,c=[],d=[],e=[],f=0,g=a.photos.photo.length;g>f;f++)b=a.photos.photo[f],c.push(b),d.push(b.title.toLowerCase()),e.push(b.tags.toLowerCase());return Slickr.titles.appendTitles(d),Slickr.tags.appendTags(e),Slickr.appendImages(c),c},Slickr.createFlickrUrl=function(a){Slickr.utils.log("createFlickrUrl",["options",a]);var b=a.method,c=a.apiKey,d=a.format,e=a.pageCount||"1",f=a.imagesPerPage||"10";return["https://api.flickr.com/services/rest/?method=",b,"&api_key=",c,"&extras=date_upload%2C+tags%2C+owner_name","&per_page=",f,"&page=",e,"&format=",d].join("")},function(){Slickr.env.setToDev(),Slickr.utils.log("intializeSlickr");var a=document.createElement("script"),b={method:"flickr.photos.getRecent",apiKey:"84bf9b29bce8db001d1e58dbec8a5770",format:"json",pageCount:"1",imagesPerPage:"100"};a.src=Slickr.createFlickrUrl(b),document.getElementById("scripts").appendChild(a)}(),$(function(){$("#titlesToggleBtn").on("click",function(){$(".titles.tag-cloud").toggleClass("display")}),$("#tagsToggleBtn").on("click",function(){$(".tags.tag-cloud").toggleClass("display")})});